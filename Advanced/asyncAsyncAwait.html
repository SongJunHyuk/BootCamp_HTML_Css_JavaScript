<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Async Await</title>
</head>
<body>
    <script>
        // async way no wait

        // var data = [ 1, 2, 3 ];

        // function getData(){
        //     // delay
        //     setTimeout(()=>{
        //         data.push( 4 );
        //         data.push( 5 );
        //     }, 1000);
        // }

        // function printData(){
        //     data.forEach( n => console.log( n ) );
        // }

        // getData();
        // printData();

        // async way : async await

        var data = [ 1, 2, 3 ];

        function getData(){
            return new Promise( (resolve, reject) => {
                // delay - 비동기 코드 ( setTimeout 이 대표적인 비동기 코드)
                setTimeout(() =>{
                    // job : inside of Promise
                    data.push( 4 );
                    data.push( 5 );

                    // reslove or reject
                    const error = false; // change to be error
                    if( !error ) resolve();
                    else reject('Error!!');

                }, 1000)

            })
        }

        function printData(){
            data.forEach( n => console.log( n ) );
        }

        // simple
        // async function doIt(){
        //     await getData(); // promise.then 보다 우아한 코딩!!
        //     printData();
        // }

        //  with error handling
        async function doIt(){
            try{
                await getData(); // promise.then 보다 우아한 코딩!!
                printData();
            }catch(e){
                console.log(e)
            }
            
            
        }
        
        doIt();
    </script>
</body>
</html>